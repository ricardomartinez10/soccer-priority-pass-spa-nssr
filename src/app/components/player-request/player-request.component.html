<div class="player-request-container">
    <div class="subscription-form-container">
        <hr>
        <div *ngIf="closeForm" class="form-closed">Fomulario cerrado</div>
        <form *ngIf="!closeForm" [formGroup]="playerRequestForm" (ngSubmit)="onSubmitRequest($event)">
            <h3>Incripción para el próximo partido</h3>
            <div class="counter-container mb-3">
                <span>Tiempo restante: </span>
                <countdown *ngIf="diffInSecs" [config]="{leftTime: diffInSecs, format: dateFormat }" (event)="handleEvent($event)"></countdown>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" formControlName="email" class="form-control" id="email">
            </div>
            <div class="mb-3">
                <label for="repeatEmail" class="form-label">Confirmar email</label>
                <input type="email" formControlName="repeatEmail" class="form-control" id="repeatEmail">
            </div>
            <div class="alert alert-warning" *ngIf="playerRequestForm.controls['email'].errors && playerRequestForm.controls['email'].hasError('email')">El email debe tener un formato valido</div>
            <div class="alert alert-warning" *ngIf="playerRequestForm.controls['repeatEmail'].errors && playerRequestForm.controls['repeatEmail'].hasError('email')">La confirmación del correo debe tener un formato valido</div>
            <div class="alert alert-warning" *ngIf="playerRequestForm.controls['repeatEmail'].errors && playerRequestForm.controls['repeatEmail'].hasError('notEqual')">Ambos correos deben coincidir</div>
            <div class="alert alert-danger" *ngIf="playerAlreadySubscribed">El jugador ya se encuentra inscrito para el próximo partido</div>
            <div class="alert alert-success" *ngIf="playerSuccessfullySubscribed">El jugador se ha inscrito exitosamente</div>
            <button type="submit" class="btn btn-success" [disabled]="!playerRequestForm.valid || loadingRequest">Enviar</button>
        </form>  
    </div>
      <hr>
      <h3 class="mt-4">Lista inscritos para el próximo partido</h3>
      <div class="indicators-container">
        <div class="indicator-item">
            <span class="mr-4 d-inline">Confirmado</span>
            <span class="indicator-item-confirm"></span>
        </div>
        <div class="indicator-item">
            <span>En espera</span>
            <span class="indicator-item-wait"></span>
        </div>
      </div>
      <div class="player-request-container-list mb-4 mt-3">
        <h4>Arqueros</h4>
        <ol class="list-group">
            <li class="list-group-item" [ngClass]="i < maxKeepers ? 'confirmed' : 'wait'" *ngFor="let player of subscribedKeepers; index as i">
              <span class="mr-4">{{i +1}}  {{ player.name }}</span>
              <span class="assists">Asistencias {{player.assists}}</span>
            </li>
        </ol>
        <h4 class="mt-4">Jugadores</h4>
        <ol class="list-group">
            <li class="list-group-item" [ngClass]="i < maxPlayers ? 'confirmed' : 'wait'"  *ngFor="let player of subscribedPlayers; index as i">
              <span class="mr-3">{{i +1}} {{ player.name }}</span> 
              <span class="assists">Asistencias {{player.assists}}</span>
            </li>
        </ol>
      </div>
</div>
